machine:
  python:
    version: '3.5.2'
  environment:
    PY26: '2.6.9'
    PY27: '2.7.12'
    PY34: '3.4.5'
    PY35: '3.5.2'

dependencies:
  cache_directories:
    - "~/.pyenv"
  pre:
    - pyenv install -sk ${PY26}
    - pyenv install -sk ${PY27}
    - pyenv install -sk ${PY34}
    - pyenv install -sk ${PY35}
    - pyenv local ${PY26} ${PY27} ${PY34} ${PY35}
    - sudo apt-get update; sudo apt-get install openjdk-8-jdk
    - sudo update-alternatives --set java /usr/lib/jvm/jdk1.8.0/bin/java
    - sudo update-alternatives --set javac /usr/lib/jvm/java-8-openjdk-amd64/bin/javac
    - echo 'export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64' >> ~/.circlerc
  override:
    - pip install -U pip
    - pip install -U tox
    - pip install -U awscli

test:
  pre:
    - ./scripts/upload_test_data.sh
  override:
    - tox
  post:
    - ./scripts/delete_test_data.sh
